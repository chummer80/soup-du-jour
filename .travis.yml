language: ruby
rvm:
- 2.2.1
branches:
  only:
  - master
install:
- travis_retry bundle install
script:
- RAILS_ENV=test bundle exec rake db:migrate --trace
- bundle exec rspec
before_script:
- psql -c 'create database "soup-du-jour_test";' -U postgres
deploy:
  provider: heroku
  api_key:
    secure: PnPOo0scHU1gWS0B9RGdgLIMUJU9OsD/V9vmcBl/dJ1s9kD0SVcMGu0rsVVSTc5d7ykmxYDjjLvU8vOHpiVNPE6aDT6pO3hR5FqE/X1L/i+CiL8tI74ptg1cHTg0rQgPz/jOI2iQxihb98021paKmOOfbaRb6SoYGJs5TdQtV4ynvdSI0Y3VzS6vzuQzq8rRSluwtXJjMEuUkNrYk/IXl29Gm9gHoEDm1ttWaqrD4q9NW4fMlIxSAxeOpu1iGsEuzXlYCsU1bQd1z1FkgSzz8pRGGAg4i2+MtgzKKbuOyFw/4v/skHlD8aN6ht7Rbb/vs2gyPrNYkeRtwRbp6yYJL1j/yckIgzep+FRGToQF3GlOSe1oIRoUcvpurXHs+RPoE8pbqnxj/t3wbf8+HYyW1/66P8HgwigcRcfNCWahCd+gDS+oQ5+jcaMPc67DIw4TW09L//uBulWtvjXU7mbxm88ZmrLtgv7eQjxsq28Afi813NxyHrwB0bD1l1WbAIaoDo5y43w6NNxfw4csfnyTl/OOiyLvVrWgBAqECs7YCRj5TOIQCFqnQ4Xno6UwcAaLohvXGQ6ASN54ux1c+KWhVLogt3g1TFcPLAjzEc31cVQP5p4NC9hPWuR7B8m7bqqEq393i8YCn8xFU/JbcW5er7IDE6EtKU5JaaWxIg0ohwQ=
  app: soupdujour
  run:
  - rake db:migrate
  - rake db:seed
  - restart
env:
  global:
  - secure: IeRYnuVpGsKSqLZP1H52eQuqCTyHhsMjQ+kYagmyA9aJrQe5oBkbOdQuPsQvD8n8JIB73PaBHbXxSI/8a3bNDsRTGzmDs4otLlxN0p/igKZfzUu7qQpLHdXfEct3x4Z7+ysE+iK5Y7aMSUd/Q6/19DAO9BlZMTYlCY3JLe8QJft3E24XawcEkMQiqeawQOLUnu89ZS1iExIULOgXZDUQleDC6LwqaU+uha/Gyj0RPvMSuVLY+iL+c9lUhQSrkg3SVKKJWd1nvHL9L3hehlqfWzAYrt8RM2UULgAi+FfYEHhb/LPDTFp1oK4PvlbVcqUcX9X7V7weS6HO7q42j67MHSJZKwYeXs1S6WqfvVpj+B18nkdREax7uXx+3PjNXzObj+/OfOO5qHxVNJgcD8pjQCnBoiVITB17Yx+UDS3wy5U1vncQqu64sCkbTxBWTxA+6jb7W5LT2s8bDcwgshq9kh3xLQ6l6W5Mqx8zvC+PsOvHy3KgBLRHeU67FDUbp7L4Z0YCp97bcrc0cWieQeVLcDs18qIHlLIAPl9XwGM+/c8u3JHm/fJO5xfBFkzSmGviyMUgIk62vYpHNKQeFAHXdnCP5BZWmwEdr8MoUASwmBsNsP3bvkbZRFGgYZA0T202VrFo0cgTrvRgkbNTrzI/6sE36HmcfDbFOOOUVUpSbfc=
  - secure: P6ZRnEIiyTJUEybLORs+5RYiHvtEFVJVpZksu39HUketzUcD30OdE2ecU65KNKBvyAqXOGhVcLzFAMdV6nQbw4jbFOGxqOvUimgpu6CaHXJRTwbVN4Mv9Z6HVIhVJz4dUZHwQsDAJAkE5pyxibPaRmPTquuLqaM+w2DyiupweNkjD0bLhY97KHyxDruJibzwkvo/Q4K3SWN+kBF4uDboMKA8zZTgMfYztCyPyFE2Mwf65BFafI3o4xqMR5yHbtOKcMXC7QRSdWxGnBWA2obQ3Y6621eNGwEhpH2Om6K8x4QWubYeCGyK+xhx779xGO/knZ5ba0hdpBh8UFJcjr24CkWsKneRwm0rBaeatzFlN/hHa9PVPBNOQuVfiGRT7kn33in6js9pDABc31JX+uvmEj81+oCaYcUbALPZXkWlfJfeQN9YiHul72xrsbenwzzYMO0uUlLlxwlxaG6e1y/2NWjme6OysiKmRpgmD/ZHkEQy5zD2Uvz9eu/2YKTHKia/JotM4n4uv5YmnKkOZmXvHUrOSYdtIdecrNFltyCyYoCh4Ljljt3XCFQLFH0Noh+nC7P4pEM5XcRK6wq35ZaPTOwKrlzu7wZYyxOW5nKVTqYLOxGRO2aKNIW+IgWJ+YCK0my0GtXpS0TWxPhP4AAeYJJKS98BWk4PApPitHnbbHE=
  - secure: C6FemM2pV/7unc7uCJB4LClTkQsb5mgreHpASEbTFUNv62pzNtXzZ2MQ9okknOkgncsfKtgJ33rqp6662WsJB+w76A9Av3PnRXSH/tz4dwZTLRi4XqTsg+1WRHcNDPI/e2LC21NPlwrPe0iWrlZFR6N8rh5u239u/5VONkuHhqtPBIh8gZLIknV/uAyuM4yVnoAD8F/wMTB1USNjOWaFpG+fiDhMNGZCcFpI4kkNdt7EBfyIQ0VkBDzgj2dvsDyKKMcI0DpShgbjiRwirZLX4DpMRzd3X70s0qCzqkUBmryAjQ3PcxM0WkusS/zUnTZd06Xk4fHKIt/e05fnWAZFtcgfN5o9BKZzAJUxc1WWU+w51zwyRJfKh/IHyscH/i70Ot5WFkoQtwg5JBEdx3ElBZwAMJs42i/w2gafZX6Ns+rByQi13fDiqmm1AlxzL18WdL0WSVw08ImGXhUjnrBxxxGXp31IsqTK0YE7av2J35qj+cU8biJOaaOAhGq+BJkfeVzCUxKrNsEmle2Dzdhw+Fzk2jnBZxlgljxs4qoLZgZKan35Qc4KjFVZNJK4iJ9sXbC9/WgrvicLO5/CsWN2AWbIUsA4dHKaWZEvdScPL3+HY1QCs/t4CzN79jOsnmiqilPFM1UJc0Fzj0GBBQIs9TqDHQYPEJgOqkGIqLMIDes=
  - secure: GyM7kz6Es+JE/x0vNgM8+fHAw76ywdbEKPsJV+JNcpln6DfpcxcPQxrnx8/xQOaoqhlHqHlf9QcJ2g0ffXmwaFDaQqU311IhlqeoB7arST9l0pBp1rv88Lr4TwBsPShFFUJAJXHFAu9M92QhZ5P8vqr6eWGKj5snKLsgzLNDeMHPXgUHVrcffmyVVW813A5NQB6KRN5Bqi6GjB+P6WInY4ZfkZa2zw81mO88NVG48OPzQ+KWLe2HmhcM6OBIxrK0Hle/YghuNsu1r4xYTW6julSk98UjfBatCwYdReSqVJnxInCJ9HaVOP8+iIKvAcPdozrYfFBLFZALuuLZLSdbdKLFovjbJYCHaxcHpnwk1JEJ7WfL83YMBRPh3gFHcxe/SDAW5atBqGaPbsMCVx2JY6b6qCZfiKj292pW/PuQl55DDB+/an0L3hF602rgoeT4ZQ4LAL3Jx/wdQOQ7S3s5Db7+Hj3e1D+6BeStKEz+a3FCbh1r/GHFOm0BwwRNvTU0Y2SSeCjfVpxYaLa+qFXhlmNYAvLScNG6o+1Lpfws5Hf1PsjA51kWAztq+7EV9hYrn9stJYTtd09kMkzX+9ZROLX5i9KxsMU+YPd8C9G2MDLijGXnILGvDr9jYmOtDMAOan9a64enRT0slneQgh5RNAkSs9XPVcTSm4tHbneBPh8=
